# Migration `20200822232425-create-landing-info-adn-business-image`

This migration has been generated by Ignacio Carlos Monzalvo Milan at 8/22/2020, 11:24:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."BusinessImage" (
"id" text  NOT NULL ,"landingInfoId" text   ,"url" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."LandingInfo" (
"businessId" text   ,"cta" text   ,"description" text  NOT NULL ,"displayName" text  NOT NULL ,"facebookUrl" text   ,"id" text  NOT NULL ,"instagramUrl" text   ,"website" text   ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "LandingInfo_businessId" ON "public"."LandingInfo"("businessId")

ALTER TABLE "public"."BusinessImage" ADD FOREIGN KEY ("landingInfoId")REFERENCES "public"."LandingInfo"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."LandingInfo" ADD FOREIGN KEY ("businessId")REFERENCES "public"."Business"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200822150429-add-default-created-at-to-notifications..20200822232425-create-landing-info-adn-business-image
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AvailabilityItem {
   id         String   @default(cuid()) @id
@@ -93,18 +93,39 @@
   bookings    Booking[]
 }
 model Business {
-  id       String   @default(cuid()) @id
+  id       String      @default(cuid()) @id
   name     String
-  email    String   @unique
-  phone    String   @unique
-  owner    User     @relation(fields: [ownerId], references: [id])
+  email    String      @unique
+  phone    String      @unique
+  owner    User        @relation(fields: [ownerId], references: [id])
   ownerId  String
-  handle   String   @unique
+  handle   String      @unique
   branches Branch[]
+  landing  LandingInfo
 }
+model BusinessImage {
+  id            String       @default(cuid()) @id
+  url           String
+  LandingInfo   LandingInfo? @relation(fields: [landingInfoId], references: [id])
+  landingInfoId String?
+}
+
+model LandingInfo {
+  id           String          @default(cuid()) @id
+  images       BusinessImage[]
+  displayName  String
+  cta          String?
+  description  String
+  instagramUrl String?
+  facebookUrl  String?
+  website      String?
+  business     Business?       @relation(fields: [businessId], references: [id])
+  businessId   String?
+}
+
 model Notification {
   id         String   @default(cuid()) @id
   user       User     @relation(fields: [userId], references: [id])
   userId     String
```


