# Migration `20200822145917-add-notifications-to-user`

This migration has been generated by Ignacio Carlos Monzalvo Milan at 8/22/2020, 2:59:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Notification" (
"createdAt" timestamp(3)  NOT NULL ,"id" text  NOT NULL ,"resourceId" text  NOT NULL ,"seen" boolean  NOT NULL ,"title" text  NOT NULL ,"type" text  NOT NULL ,"userId" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Notification" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200802221350-added-verifytoken-field-to-user..20200822145917-add-notifications-to-user
--- datamodel.dml
+++ datamodel.dml
@@ -6,9 +6,9 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AvailabilityItem {
   id         String   @default(cuid()) @id
@@ -103,22 +103,34 @@
   handle   String   @unique
   branches Branch[]
 }
+model Notification {
+  id         String   @default(cuid()) @id
+  user       User     @relation(fields: [userId], references: [id])
+  userId     String
+  type       String
+  title      String
+  resourceId String
+  createdAt  DateTime
+  seen       Boolean
+}
+
 model User {
-  email       String     @unique
-  id          String     @default(cuid()) @id
-  name        String?
-  password    String     @default("")
-  posts       Post[]
-  business    Business?
-  givenName   String
-  familyName  String
-  userName    String
-  userType    UserType
-  bookings    Booking[]
-  Employee    Employee[]
-  verifyToken String     @default("")
+  email         String         @unique
+  id            String         @default(cuid()) @id
+  name          String?
+  password      String         @default("")
+  posts         Post[]
+  business      Business?
+  givenName     String
+  notifications Notification[]
+  familyName    String
+  userName      String
+  userType      UserType
+  bookings      Booking[]
+  Employee      Employee[]
+  verifyToken   String         @default("")
 }
 model Post {
   authorId  String?
```


