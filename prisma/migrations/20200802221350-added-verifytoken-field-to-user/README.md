# Migration `20200802221350-added-verifytoken-field-to-user`

This migration has been generated by Ignacio Carlos Monzalvo Milan at 8/2/2020, 10:13:50 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "verifyToken" text  NOT NULL DEFAULT E'';

CREATE UNIQUE INDEX "Business.handle" ON "public"."Business"("handle")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200616201048-first..20200802221350-added-verifytoken-field-to-user
--- datamodel.dml
+++ datamodel.dml
@@ -6,30 +6,30 @@
 }
 datasource db {
   provider = "postgres"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AvailabilityItem {
-  id         String      @default(cuid()) @id
+  id         String   @default(cuid()) @id
   day        Day
   from       String
   to         String
   employee   Employee @relation(fields: [employeeId], references: [id])
   employeeId String
 }
 model VacationsItem {
-  id         String      @default(cuid()) @id
+  id         String   @default(cuid()) @id
   from       String
   to         String
   employee   Employee @relation(fields: [employeeId], references: [id])
   employeeId String
 }
 model Booking {
-  id               String           @default(cuid()) @id
+  id               String        @default(cuid()) @id
   start            String
   end              String
   status           BookingStatus
   client           User?         @relation(fields: [clientId], references: [id])
@@ -52,9 +52,9 @@
   CANCELLED
 }
 model Employee {
-  id           String                @default(cuid()) @id
+  id           String             @default(cuid()) @id
   givenName    String
   familyName   String
   user         User?              @relation(fields: [userId], references: [id])
   userId       String?
@@ -66,9 +66,9 @@
   vacations    VacationsItem[]
 }
 model Service {
-  id          String        @default(cuid()) @id
+  id          String     @default(cuid()) @id
   name        String
   price       Float
   currency    String
   duration    Int
@@ -78,9 +78,9 @@
   bookings    Booking[]
 }
 model Branch {
-  id          String        @default(cuid()) @id
+  id          String     @default(cuid()) @id
   address     String
   phone       String
   email       String
   name        String
@@ -93,37 +93,38 @@
   bookings    Booking[]
 }
 model Business {
-  id       String      @default(cuid()) @id
+  id       String   @default(cuid()) @id
   name     String
   email    String   @unique
   phone    String   @unique
   owner    User     @relation(fields: [ownerId], references: [id])
   ownerId  String
-  handle   String
+  handle   String   @unique
   branches Branch[]
 }
 model User {
-  email      String     @unique
-  id         String        @default(cuid()) @id
-  name       String?
-  password   String     @default("")
-  posts      Post[]
-  business   Business?
-  givenName  String
-  familyName String
-  userName   String
-  userType   UserType
-  bookings   Booking[]
-  Employee   Employee[]
+  email       String     @unique
+  id          String     @default(cuid()) @id
+  name        String?
+  password    String     @default("")
+  posts       Post[]
+  business    Business?
+  givenName   String
+  familyName  String
+  userName    String
+  userType    UserType
+  bookings    Booking[]
+  Employee    Employee[]
+  verifyToken String     @default("")
 }
 model Post {
   authorId  String?
   content   String?
-  id        String     @default(cuid()) @id
+  id        String  @default(cuid()) @id
   published Boolean @default(false)
   title     String
   author    User?   @relation(fields: [authorId], references: [id])
 }
```


